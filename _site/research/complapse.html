<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.247">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Dr. Olga Perski – complapse</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-WF7G4G33CE"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-WF7G4G33CE', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Dr.&nbsp;Olga Perski</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-research" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Research</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-research">    
        <li>
    <a class="dropdown-item" href="../research/complapse.html"><i class="bi bi-graph-up" role="img">
</i> 
 <span class="dropdown-text">COMPLAPSE</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../research/emasens.html"><i class="bi bi-smartwatch" role="img">
</i> 
 <span class="dropdown-text">EMASENS</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../research/odh_database.html"><i class="bi bi-door-open-fill" role="img">
</i> 
 <span class="dropdown-text">Open Digital Health initiative Living Review &amp; Database Development</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../research/vr_smoking.html"><i class="bi bi-badge-vr" role="img">
</i> 
 <span class="dropdown-text">Virtual Reality for Smokers Unmotivated to Stop</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../research/wellbeing_students.html"><i class="bi bi-balloon-heart" role="img">
</i> 
 <span class="dropdown-text">Mental Wellbeing in Swedish University Students During COVID-19</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../research/fsa_qat.html"><i class="bi bi-card-checklist" role="img">
</i> 
 <span class="dropdown-text">UK Food Standards Agency - Quality Assurance Toolkit</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../research/ema_review.html"><i class="bi bi-sliders" role="img">
</i> 
 <span class="dropdown-text">Systematic Review of Ecological Momentary Assessment Studies</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../research/covid.html"><i class="bi bi-bug" role="img">
</i> 
 <span class="dropdown-text">COVID-19, Smoking and Personal Protective Behaviours</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../research/engagement.html"><i class="bi bi-phone-vibrate" role="img">
</i> 
 <span class="dropdown-text">Acceptability of and Engagement with Digital Behaviour Change Interventions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../research/sts_ats.html"><i class="bi bi-house-door" role="img">
</i> 
 <span class="dropdown-text">UCL Smoking &amp; Alcohol Toolkit Studies</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="https://scholar.google.co.uk/citations?user=t7lihTUAAAAJ&amp;hl=en">
 <span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../talks.html">
 <span class="menu-text">Talks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../teaching.html">
 <span class="menu-text">Teaching and supervision</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../media.html">
 <span class="menu-text">Public engagement</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../policy.html">
 <span class="menu-text">Policy engagement</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../consultancies.html">
 <span class="menu-text">Consultancies</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../blog.html">
 <span class="menu-text">Blog</span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#wp1" id="toc-wp1" class="nav-link active" data-scroll-target="#wp1">WP1</a></li>
  <li><a href="#wp2" id="toc-wp2" class="nav-link" data-scroll-target="#wp2">WP2</a></li>
  <li><a href="#wp3" id="toc-wp3" class="nav-link" data-scroll-target="#wp3">WP3</a></li>
  <li><a href="#wp4" id="toc-wp4" class="nav-link" data-scroll-target="#wp4">WP4</a></li>
  <li><a href="#wp5" id="toc-wp5" class="nav-link" data-scroll-target="#wp5">WP5</a></li>
  <li><a href="#wp6" id="toc-wp6" class="nav-link" data-scroll-target="#wp6">WP6</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">



<center>
<img src="complapse.png" class="img-fluid" style="width:60.0%"> <br><br> <strong>Improving the precision of behaviour change theories: Development and validation of a dynamic COMPutational model of LAPSE risk in smokers attempting to stop (COMPLAPSE)</strong>
</center>
<p><br><br> Cigarette smoking remains the leading preventable cause of premature morbidity and mortality in Europe and beyond. Gold standard treatment for smoking cessation includes pharmacotherapy and behavioural support. However, smoking lapses – influenced by momentary fluctuations in cigarette availability, stress, and cravings – are a key source of treatment failure. COMPLAPSE aims to advance the state-of-the-art by developing and validating a formal, dynamical systems model of lapse risk, improving the precision of static behaviour change theories to account for observed complexities and laying the foundation for dynamically tailored, person-centred digital smoking cessation interventions for increased effectiveness. COMPLAPSE is interdisciplinary in scope – drawing on know-how from behavioural science, <a href="../talks/UCSDT32_2023/index.html">systems science and dynamical systems modelling</a> – and directly contributes to Europe’s Path to the Digital Decade and its Strategic Framework for the Prevention of Non-Communicable Diseases.</p>
<p>COMPLAPSE is funded by the European Commission under the Horizon Europe Framework Programme (HORIZON), Grant No.&nbsp;101065293 (PI: Dr.&nbsp;Olga Perski; Mentors: Prof.&nbsp;Nelli Hankonen and Prof.&nbsp;Eric Hekler).</p>
<p>Specifically, project COMPLAPSE aims to:</p>
<ol type="1">
<li>Develop a conceptual model of lapse risk, drawing on the available literature and stakeholder input (addressed in WPs 1-2);</li>
<li>Formulate mathematical equations that link the components in the conceptual model and perform computer simulations to examine the system behaviour (addressed in WP3);</li>
<li>Collect EMA and sensor data and use this to calibrate/validate the formal, dynamical systems model (addressed in WP4).</li>
<li>Use the knowledge accumulated within project COMPLAPSE to propose a set of “best practice” recommendations for how to use formal, dynamical systems modelling in health psychology research and practice (addressed in WPs 1-5)</li>
</ol>
<p>See Figure 1 for an overview of the WPs within COMPLAPSE.</p>
<center>
<p><img src="complapse_gantt.png" class="img-fluid" style="width:100.0%"></p>
<figcaption>
Figure 1. Gantt chart of the WPs, tasks, deliverables and milestones within COMPLAPSE.
</figcaption>
</center>
<p><br></p>
<section id="wp1" class="level3">
<h3 class="anchored" data-anchor-id="wp1">WP1</h3>
<p>Health psychology theories are needed to improve capacities to predict, explain, and influence phenomena of interest. Scientific progress is hampered by the ‘theory crisis’, whereby most of our available health psychology theories exist as under-specified box-and-arrow diagrams and imprecise natural language descriptions of the inter-relationships between phenomena of interest. At the same time, a growing body of evidence made possible by recent technological advances highlights that many health-related behaviours display characteristics of dynamical systems (e.g., they fluctuate non-linearly within individuals over time and across contexts). Health psychologists have begun to recognise that we, as a field, must become better able to theorise about dynamical systems if we want to make progress on the most pressing issues of our times (e.g., addiction, obesity, mental health, and climate change). ‘Formal modelling’ (i.e., the mathematical or logical formalisation of a theory’s structure) in combination with a dynamical systems lens has the potential to narrow the gap between emerging empirical evidence and current health psychology theories, and simultaneously equip researchers and decision-makers with tools that can help us tackle the biggest challenges facing our societies today.</p>
<center><iframe src="https://mfr.de-1.osf.io/render?url=https://osf.io/download/5wmtp/?direct%26mode=render" width="70%" scrolling="yes" height="677px" marginheight="0" frameborder="0" allowfullscreen="" webkitallowfullscreen="" title="Towards improving the precision of health psychology theories"></iframe></center>
<p>The aim of WP1 is therefore to conduct a scoping review of the extent and nature of research activities pertaining to the use of formal, dynamical systems modelling of health behaviours (e.g., tobacco smoking, alcohol consumption). We aim to synthesise existing methodological steps used in the published literature (i.e., a bottom up approach), with a view to aiding researchers who intend to use formal, dynamical systems modelling in future work. We will follow the scoping review guidelines developed by Arksey and O’Malley, starting with the identification and selection of relevant studies, followed by the charting of the data, and the collating, summarising, and reporting of the results. The <a href="https://osf.io/zx2de/">scoping review protocol</a> is available on the Open Science Framework.</p>
</section>
<section id="wp2" class="level3">
<h3 class="anchored" data-anchor-id="wp2">WP2</h3>
<p>Drawing on findings from the EMA literature (including a recent <a href="https://psyarxiv.com/au498/">systematic review and meta-analysis</a>) and an informal literature review of available theories of when and why people lapse when they try to stop smoking, we have developed an initial conceptual model using Lucidchart. Stakeholders are currently being invited to critique and add to/remove from the conceptual model through a series of one-to-one interviews. The methodology used is grounded in participatory systems mapping (Barbrook-Johnson &amp; Penn, 2021). The following stakeholder groups are invited to contribute:</p>
<p><strong>Researchers:</strong> Scientific researchers working across universities, research institutes, government or not-for-profit organisations specialising in behaviour change theory, smoking cessation, and/or computational modelling (n=6);</p>
<p><strong>Policymakers and stop smoking practitioners:</strong> Policymakers/tobacco control experts working across government and not-for-profit organisations or stop smoking practitioners working across dedicated stop smoking services or general medical practice (n=6);</p>
<p><strong>People with lived experience:</strong> Adult, daily or non-daily smokers who have made at least one past-year quit attempt OR recent ex-smokers who have quit smoking cigarettes in the past year (n=6).</p>
<p>The stakeholder interviews will be analysed using reflexive thematic analysis. Findings will be integrated with those from the informal literature review, and an updated version of the conceptual model will be produced. The updated conceptual model will serve as a starting point for the development of the formal, dynamical systems model in WP3.</p>
</section>
<section id="wp3" class="level3">
<h3 class="anchored" data-anchor-id="wp3">WP3</h3>
<p>Next, mathematical equations will be formulated and translated into R code. Initial parameter values will be selected and simulations will be run. Sensitivity analyses will be conducted, varying the initial parameter values to examine the model’s robustness. An R Shiny app will be developed to help visualise the simulation results. The stakeholders recruited in WP2 will be invited back to provide feedback on the simulated results.</p>
</section>
<section id="wp4" class="level3">
<h3 class="anchored" data-anchor-id="wp4">WP4</h3>
<p>Next, EMA and sensor data will be collected to help calibrate and validate the formal, dynamical systems model. Participants will be recruited via social media platforms. Eligibility criteria will include being an adult, daily smoker who i) owns a smartphone, ii) is willing to make a quit attempt, and iii) is willing to respond to regular EMAs and wear a sensor for the duration of the study (to be determined following the results from WPs 2-3). At least 50% of smokers will be recruited from lower socioeconomic position groups and an equal proportion of women and men will be recruited. We will fit the formal, dynamical systems model developed in WPs 2-3 to the data collected and goodness of fit statistics will be calculated. Model comparisons will be conducted.</p>
</section>
<section id="wp5" class="level3">
<h3 class="anchored" data-anchor-id="wp5">WP5</h3>
<p>The scoping review in WP1 used a bottom up approach to identify the extent and nature of modelling practices in the published literature. In WP5, we will draw on the knowledge accumulated within project COMPLAPSE and other, related modelling projects (i.e., more of a top down approach) to provide a tutorial on how to do formal, dynamical systems modelling in health psychology research and practice.</p>
</section>
<section id="wp6" class="level3">
<h3 class="anchored" data-anchor-id="wp6">WP6</h3>
<p>This website will be used for dissemination of findings from project COMPLAPSE, including scientific publications, talks, blogs, and workshops.</p>
<figcaption>
Logo designed using image by bsd_studio (Image #28812502 at VectorStock.com)
</figcaption>

<p><br></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>